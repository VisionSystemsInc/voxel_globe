{% extends "main/base.html" %}
{% load staticfiles %}

{% block title %}Point Cloud Viewer {% endblock %}

{% block includes %}
  <script src="{% static 'potree/libs/other/stats.min.js' %}"></script>
  <script src="{% static 'potree/libs/other/dat.gui.min.js' %}"></script>
  <script src="{% static 'potree/libs/other/BinaryHeap.js' %}"></script>
  <script src="{% static 'potree/libs/three.js/build/three.js' %}"></script>
  <script src="{% static 'potree/build/js/potree.js' %}"></script>
  
  <script src="{% static 'voxel_viewer/js/ProgressBar.js' %}"></script>

  <style>
#renderArea{
  width: 1000px; 
  height: 1000px; 
}

.info{
  color:    white;
  font-weight: bold;
  text-shadow:  1px  1px 1px black,
          1px -1px 1px black,
         -1px  1px 1px black,
         -1px -1px 1px black;
}

a:hover, a:visited, a:link, a:active{
  color: #ccccff;
  text-decoration: none;
}

canvas { 
  width: 1000px; 
  height: 1000px; 
}

body{ 
  margin: 0; 
  padding: 0
}
  </style>

{% endblock %}

{% block javascript %}

var skyboxPath = "{% static 'voxel_viewer/textures/skybox/' %}";

{% endblock %}

{% block content %}
	<!-- HEADING -->
		
	<!-- INFOS / STATS -->
	<div id="lblNumVisibleNodes" class="info" style="position: absolute; left: 10px; top: 80px; width: 400px; color:white"></div>
	<div id="lblNumVisiblePoints" class="info" style="position: absolute; left: 10px; top: 100px; width: 400px; color:white"></div>
	<div id="lblMessage" class="info" style="position: absolute; left: 10px; bottom: 0px; width: 400px; color:white"></div>
	
	<!-- TOOLS -->
	<div id="tools" style="position: fixed; width: 400px; bottom: 10px; right: 10px">
		<img src="{% static 'voxel_viewer/icons/earth_controls_1.png' %}" onclick="useEarthControls()" title="Earth Controls"/>
		<img src="{% static 'voxel_viewer/icons/fps_controls.png' %}" onclick="useFPSControls()" title="Fly Camera"/>
		<img src="{% static 'voxel_viewer/icons/orbit_controls.png' %}" onclick="useOrbitControls()" title="Orbit Controls"/>
		<img src="{% static 'voxel_viewer/icons/focus.png' %}" onclick="camera.zoomTo(pointcloud)" title="focus on pointcloud"/>
		<img src="{% static 'voxel_viewer/icons/flip_y_z.png' %}" onclick="flipYZ()" title="flip y and z coordinates"/>
		<img src="{% static 'voxel_viewer/icons/angle.png' %}" onclick="measuringTool.startInsertion({showDistances: false, showAngles: true, showArea: false, closed: true, maxMarkers: 3})" title="angle measurements"/>
		<img src="{% static 'voxel_viewer/icons/distance.png' %}" onclick="measuringTool.startInsertion({showDistances: true, showArea: false, closed: false})" title="distance measurements"/>
		<img src="{% static 'voxel_viewer/icons/area.png' %}" onclick="measuringTool.startInsertion({showDistances: true, showArea: true, closed: true})" title="area measurements"/>
		<img src="{% static 'voxel_viewer/icons/volume.png' %}" onclick="volumeTool.startInsertion()" title="volume measurements"/>
		<img src="{% static 'voxel_viewer/icons/profile.png' %}" onclick="profileTool.startInsertion({width: pointcloud.boundingSphere.radius / 100})" title="height profiles"/>
		<img src="{% static 'voxel_viewer/icons/clip_volume.png' %}" onclick="volumeTool.startInsertion({clip: true})" title="clipping volumes"/>
	</div>
	
	<div id="renderArea"></div>

  <script>
var sceneProperties = {
      path:     "/images/vol_total/cloud.js",
      cameraPosition: null,
      cameraTarget: null,
      sizeType:     "Adaptive",     // options: "Fixed", "Attenuated", "Adaptive"
      quality:    "Interpolation",  // options: "Squares", "Circles", "Interpolation", "Splats"
      fov:      75,         // field of view in degree
      material:     "RGB",        // options: "RGB", "Height", "Intensity", "Classification"
      pointLimit:   1,          // max number of points in millions
      navigation:   "Orbit",      // options: "Earth", "Orbit", "Flight"
      pointSize:    1.2,  
      useEDL:     false,        // eye-dome-lighting, especially usefull for point clouds without normals
    };  
</script>
<script src="{% static 'voxel_viewer/js/viewer.js' %}"></script>

{% endblock %}
